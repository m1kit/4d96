"use strict";var _createClass=function(){function a(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}();function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}
/*!
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  Web Starter Kit
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  Copyright 2015 Google Inc. All rights reserved.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  Licensed under the Apache License, Version 2.0 (the "License");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  you may not use this file except in compliance with the License.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  You may obtain a copy of the License at
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *    https://www.apache.org/licenses/LICENSE-2.0
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  Unless required by applicable law or agreed to in writing, software
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  distributed under the License is distributed on an "AS IS" BASIS,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  See the License for the specific language governing permissions and
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  limitations under the License
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   */
/*!
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  Web Starter Kit
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  Copyright 2015 Google Inc. All rights reserved.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  Licensed under the Apache License, Version 2.0 (the "License");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  you may not use this file except in compliance with the License.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  You may obtain a copy of the License at
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *    https://www.apache.org/licenses/LICENSE-2.0
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  Unless required by applicable law or agreed to in writing, software
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  distributed under the License is distributed on an "AS IS" BASIS,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  See the License for the specific language governing permissions and
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *  limitations under the License
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   */
!function(){var s=void 0,r=void 0,a=void 0,n=void 0,t=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&("https:"===window.location.protocol||t)&&navigator.serviceWorker.register("service-worker.js").then(function(e){e.onupdatefound=function(){if(navigator.serviceWorker.controller){var t=e.installing;t.onstatechange=function(){switch(t.state){case"installed":break;case"redundant":throw new Error("The installing service worker became redundant.")}}}}}).catch(function(t){console.error("Error during service worker registration:",t)});var E={INVALID:0,EMPTY:1,RED:2,GREEN:3,BLUE:4},d={UPPER_LEFT:0,LOWER_RIGHT:1,LEFT:2,RIGHT:3,LOWER_LEFT:4,UPPER_RIGHT:5},i=function(){function v(t){_classCallCheck(this,v),this.size=t,this.data=new Array(2*t);for(var e=0;e<this.data.length;e++){this.data[e]=new Array(4*t);for(var r=0;r<this.data[e].length;r++){var a=2*e+r;this.data[e][r]=2*t-1<=a&&a<=4*t+6?E.EMPTY:E.INVALID}}}return _createClass(v,[{key:"stringfy",value:function(t){for(var e="",r=0,a=0;a<this.data.length;a++){for(var n=" ".repeat(2*a),i=" ".repeat(2*a+2),o=0;o<this.data[a].length;o++){var u=t&&this.isAvailable(o,a,t)?r++:this.data[a][o].char;o%2==0?n+=u+"   ":i+=u+"   "}e+=n+"\n"+i+"\n"}return e}},{key:"getReplacables",value:function(t,e,r){if(this.at(t,e)===E.EMPTY){var a=this.getAvailableDirections(t,e,r);if(0===a.length)return[];var n=[[t,e]],i=!0,o=!1,u=void 0;try{t:for(var c,l=a[Symbol.iterator]();!(i=(c=l.next()).done);i=!0)for(var s=c.value,f=[t,e];;){if(f=v.next(f[0],f[1],s),this.at(f[0],f[1])===r)continue t;n.push([f[0],f[1]])}}catch(t){o=!0,u=t}finally{try{!i&&l.return&&l.return()}finally{if(o)throw u}}return n}return[]}},{key:"put",value:function(t,e,r){var a=this.getReplacables(t,e,r);if(0===a.length)return!1;var n=!0,i=!1,o=void 0;try{for(var u,c=a[Symbol.iterator]();!(n=(u=c.next()).done);n=!0){var l=u.value;this.putForcibly.apply(this,_toConsumableArray(l).concat([r]))}}catch(t){i=!0,o=t}finally{try{!n&&c.return&&c.return()}finally{if(i)throw o}}return!0}},{key:"putForcibly",value:function(t,e,r){this.data[e][t]=r}},{key:"at",value:function(t,e){return t<0||e<0||t>=4*this.size||e>=2*this.size?E.INVALID:this.data[e][t]}},{key:"area",value:function(){return 2*this.size*(2*this.size-1)}},{key:"getAvailableDirections",value:function(t,e,r){if(this.at(t,e)!==E.EMPTY)return[];var a=[],n=!0,i=!1,o=void 0;try{t:for(var u,c=Object.values(d)[Symbol.iterator]();!(n=(u=c.next()).done);n=!0)for(var l=u.value,s=[t,e],f=!1;;){s=v.next(s[0],s[1],l);var h=this.at.apply(this,_toConsumableArray(s));if(h===r){f&&a.push(l);continue t}if(h===E.EMPTY||h===E.INVALID)continue t;f=!0}}catch(t){i=!0,o=t}finally{try{!n&&c.return&&c.return()}finally{if(i)throw o}}return a}},{key:"isAvailable",value:function(t,e,r){return 0<this.getAvailableDirections(t,e,r).length}},{key:"getAvailables",value:function(t){for(var e=[],r=0;r<this.data.length;r++)for(var a=0;a<this.data[r].length;a++)this.isAvailable(a,r,t)&&e.push([a,r]);return e}},{key:"count",value:function(t){for(var e=0,r=0;r<this.data.length;r++)for(var a=0;a<this.data[r].length;a++)this.at(a,r)===t&&e++;return e}},{key:"getWhoWon",value:function(){var t=this.count(E.RED),e=this.count(E.GREEN),r=this.count(E.BLUE);return e<=t&&r<=t?E.RED:r<=e?E.GREEN:E.BLUE}}],[{key:"next",value:function(t,e,r){switch(r){case d.UPPER_LEFT:return[t+(t%2==0?1:-1),e-(t%2==0?1:0)];case d.LOWER_RIGHT:return[t+(t%2==0?1:-1),e+(t%2==0?0:1)];case d.LEFT:return[t-1,e];case d.RIGHT:return[t+1,e];case d.LOWER_LEFT:return[t-1,e+(t%2==0?0:1)];case d.UPPER_RIGHT:return[t+1,e-(t%2==0?1:0)];default:throw new Error}}}]),v}();function o(t,e){return document.getElementById(e+"-"+t)}function u(t){switch(t){case E.RED:return document.getElementById("red");case E.GREEN:return document.getElementById("green");case E.BLUE:return document.getElementById("blue");default:throw new Error}}function f(t,e,r){o(t,e).setAttribute("fill",r)}function h(){switch(r%3){case 0:return E.RED;case 1:return E.GREEN;case 2:return E.BLUE;default:throw new Error}}function v(){for(var t=!1,e=0;e<2*s.size;e++)for(var r=0;r<4*s.size;r++){switch(s.at(r,e)){case E.INVALID:continue;case E.EMPTY:0===s.getReplacables(r,e,h()).length?f(r,e,"#adadad"):(f(r,e,"#f8fbf8"),t=!0);break;case E.RED:f(r,e,"#e95464");break;case E.GREEN:f(r,e,"#38b48b");break;case E.BLUE:f(r,e,"#3e62ad");break;default:throw new Error}}for(var a=[E.RED,E.GREEN,E.BLUE],n=0;n<a.length;n++){var i=a[n];u(i).innerText=s.count(i),h()===i?u(i).classList.add("player"):u(i).classList.remove("player")}return t}function y(t,e){s.put(t,e,h())&&(c(),function t(e){3<=e?(v(),confirm("試合が終了しました。次の試合を開始します。")&&l()):(r++,v()||t(e+1))}(0))}function c(){for(var t=new Array(s.data.length),e=0;e<s.data.length;e++)t[e]=[].concat(s.data[e]);a[++n]={data:t,turn:r}}function l(){a=[],n=-1,s=new i(4),r=0,s.putForcibly(10,2,E.RED),s.putForcibly(11,2,E.GREEN),s.putForcibly(11,3,E.GREEN),s.putForcibly(10,4,E.BLUE),s.putForcibly(8,5,E.BLUE),s.putForcibly(7,5,E.RED),s.putForcibly(5,5,E.RED),s.putForcibly(4,5,E.GREEN),s.putForcibly(4,4,E.GREEN),s.putForcibly(5,3,E.BLUE),s.putForcibly(7,2,E.BLUE),s.putForcibly(8,2,E.RED);for(var t=function(l){for(var t=function(c){s.at(c,l)!==E.INVALID&&(o(c,l).onclick=function(){return y(c,l)},o(c,l).addEventListener("mouseenter",function(){var t=void 0;switch(h()){case E.RED:t="#ff8494";break;case E.GREEN:t="#68e4bb";break;case E.BLUE:t="#6e92dd";break;default:throw new Error}var e=s.getReplacables(c,l,h()),r=!0,a=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var u=i.value;f.apply(void 0,_toConsumableArray(u).concat([t]))}}catch(t){a=!0,n=t}finally{try{!r&&o.return&&o.return()}finally{if(a)throw n}}},!1),o(c,l).addEventListener("mouseleave",function(){v()},!1))},e=0;e<4*s.size;e++)t(e)},e=0;e<2*s.size;e++)t(e);v(),c()}l()}();
//# sourceMappingURL=main.min.js.map
